name: transfer-dev-to-external-repo
on:
  push:
    branches:
      - dev

jobs:
  copy-to-other-repo:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout dev branch
      uses: actions/checkout@v2
      with:
        ref: dev ## checkouts "dev" branch
    - run: git remote -v
    - run: git remote remove origin
    - run: git remote add git@github.com:FAIRplus/cookbook-dev.git
    - run: git push
    - name: Push to other repo
      uses: pixta-dev/repository-mirroring-action@v1
      with:
        target_repo_url:
          git@github.com:FAIRplus/cookbook-dev.git
        ssh_private_key:                                # <-- use 'secrets' to pass credential information.
          ${{ secrets.ACTIONS_DEPLOY_KEY }}
